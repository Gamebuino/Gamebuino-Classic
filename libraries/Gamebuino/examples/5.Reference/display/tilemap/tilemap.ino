#include <SPI.h>
#include <Gamebuino.h>
Gamebuino gb;
     
    //map followed by tilesprites

    const byte

    tilemap[] PROGMEM = {24,24,
      0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,6,1,1,3,0,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,2,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      1,1,1,1,8,1,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,2,0,0,0,0,6,1,1,1,1,8,0,0,0,0,0,0,0,0,0,
      0,0,0,0,2,0,0,4,1,1,1,1,1,1,8,1,1,1,1,3,0,0,0,0,
      0,0,4,1,8,1,1,5,0,0,0,0,0,0,2,0,0,0,0,6,1,1,1,1,
      0,0,2,0,6,1,1,1,1,3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,
      0,0,2,0,0,0,0,0,0,2,0,0,0,0,6,1,1,3,0,0,0,0,0,0,
      1,1,5,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,
      0,0,0,0,2,0,0,0,0,8,3,0,0,0,0,0,0,2,0,0,0,0,0,0,
      0,0,0,1,8,1,0,0,0,8,5,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,2,0,0,0,0,8,3,0,0,0,4,3,0,0,4,3,0,0,0,0,
      0,0,0,0,0,0,0,0,0,8,5,0,0,0,6,5,0,0,6,5,0,0,0,0,
      0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,
      0,0,0,4,1,1,1,1,1,5,0,0,0,6,1,1,1,1,1,1,5,0,0,0,
      0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,
      0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,8,0,0,0,0,0,0,
      0,0,0,2,0,0,0,0,0,0,2,0,2,0,0,0,0,0,8,0,0,0,0,0,
      0,0,0,2,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0,8,0,0,0,0,
     
     
    },


    sprite0[] PROGMEM = {5,5, 
    B00000000,
    B00000000,
    B00000000,
    B00000000,
    B00000000,
    },

    // -
    sprite1[] PROGMEM = {5,5, 
    B00000000,
    B11111000,
    B10001000,
    B11111000,
    B00000000,
    },

    // |
    sprite2[] PROGMEM = {5,5, 
    B01110000,
    B01010000,
    B01010000,
    B01010000,
    B01110000,
    },

    //  -.
    sprite3[] PROGMEM = {5,5, 
    B00000000,
    B11100000,
    B10110000,
    B11010000,
    B01110000,
    },

    //  .-
    sprite4[] PROGMEM = {5,5, 
    B00000000,
    B00111000,
    B01101000,
    B01011000,
    B01110000,
    },

    //  -'
    sprite5[] PROGMEM = {5,5, 
    B01110000,
    B11010000,
    B10110000,
    B11100000,
    B00000000,
    },

    //   '-
    sprite6[] PROGMEM = {5,5, 
    B01110000,
    B01011000,
    B01101000,
    B00111000,
    B00000000,
    },


    //   '-
    sprite7[] PROGMEM = {5,5, 
    B11111000,
    B10001000,
    B10001000,
    B10001000,
    B11111000,
    },

    //   '-
    sprite8[] PROGMEM = {5,5, 
    B01110000,
    B11011000,
    B10000000,
    B11011000,
    B01110000,
    };


// define the spritesheet
const byte *spritesheet[] = {sprite0,sprite1,sprite2,sprite3,sprite4,sprite5,sprite6,sprite7,sprite8};

     

int x=0,y=0;
       
void setup() {
  gb.begin();
  gb.titleScreen(F("test"));
  gb.display.persistence = false;
}
void loop() {
  if(gb.update()){
    if (gb.buttons.repeat(BTN_RIGHT,1)){x--;}
    if (gb.buttons.repeat(BTN_LEFT,1)){x++;}
    if (gb.buttons.repeat(BTN_DOWN,1)){y--;}
    if (gb.buttons.repeat(BTN_UP,1)){y++;}
    gb.display.drawTilemap(x,y,tilemap,spritesheet); // draw the tilemap
    gb.display.drawRect(2,2,x,y);
    gb.display.cursorY = 12; gb.display.println( x );gb.display.println( y );
  }
}
